<!DOCTYPE html>
<html data-theme="blv"{% if scrollto-enabled %} data-scrollto-enabled{% endif %}{% if agreement-enabled %} data-agreement-enabled{% endif %}>
  <head>
    <meta name="robots" content="noindex,nofollow">
    <title>BLV Prototype {{ title }}</title>
    <link rel="icon" href="{{ '/' | url }}src/img/favicon.ico" sizes="any" type="image/svg+xml" />

    <link href="{{ '/' | url }}src/swage.css" rel="stylesheet" type="text/css" />
    <link href="{{ '/' | url }}src/modules/modules.css" rel="stylesheet" type="text/css" />
    <link href="{{ '/' | url }}src/themes/blv/blv.css" rel="stylesheet" type="text/css" />
    <link href="{{ '/' | url }}src/themes/blv/blv-mobile.css" rel="stylesheet" type="text/css" />



  </head>
    <body class="page-{{ location | default: 'start' }}"{% if confetti-auto %} data-confetti-auto{% if confetti-delay %} data-confetti-delay="{{ confetti-delay }}"{% endif %}{% if confetti-count %} data-confetti-count="{{ confetti-count }}"{% endif %}{% if confetti-bursts %} data-confetti-bursts="{{ confetti-bursts }}"{% endif %}{% endif %}>
    <div class="wrap">
      <header>
        <div class="container">
            <div class="flex-row flex-justify-between flex-items-center">
                <div class="logo logo--s32">
                   <a href="{{ '/' | url }}prototypes/blv/renewal/"><img src="https://static.curative.com/logos/Curative_Symbol_RedOrange.svg" alt="Curative Logo - SIGNAL_ORANGE_SYMBOL_ONLY" class="logo__image"></a>
                </div>

                <div class="flex-row flex-items-center gap-8">
                    <button class="button button--utility button--with-icon" onclick="restartPrototype()"><span class="heroicon heroicon-16 heroicon-arrow-path"></span> Restart</button>

                    <button class="drawer-trigger" data-drawer-target="contents" title="Open menu" aria-expanded="false" aria-controls="contents">
                <span class="heroicon heroicon-outline-map"></span>
            </button>
                </div>
            </div>
        </div>
            {% include 'templates/blv/_nav.html' %}
        
      </header>
  
      <main>
        
              <article>{{ content }}</article>

              {% include 'templates/blv/_contents.html' %}
      </main>
  
      
  
      <footer>
        <div class="container flex-row flex-justify-center">
            <a id="continue-button" class="button button--big-primary button--with-icon" href="{{ '/' | url }}prototypes/blv/renewal/{{ next }}">
                {{ button-text | default: 'Continue' }}
                <svg data-slot="icon" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"></path>
                  </svg>
                </a>
        </div>
      </footer>
  
    </div>


    <div class="status">
        <div>
          <span class="part {{ design-status }}">
            <span>Design: </span>
            
          </span>

          <span class="part {{ content-status }}">
            <span>Content: </span>
            
          </span>
          </div>
    </div>


  <script src="{{ '/' | url }}src/components.js"></script>
  <script src="{{ '/' | url }}src/modules/drawer/drawer.js"></script>
  <script src="{{ '/' | url }}src/modules/page-transition/page-transition.js"></script>

  <!-- BLV Data Manager - MUST load before page-specific scripts -->
  <script src="{{ '/' | url }}prototypes/blv/renewal/src/data-manager.js"></script>

  <!-- BLV Component Scripts -->
  <script src="{{ '/' | url }}src/components/blv/carousel.js"></script>
  <script src="{{ '/' | url }}src/components/blv/horizontal-stepper.js"></script>
  <script src="{{ '/' | url }}src/components/blv/checkmark-button.js"></script>
  <script src="{{ '/' | url }}src/components/blv/rating-picker.js"></script>
  <script src="{{ '/' | url }}src/components/blv/checkmark-label.js"></script>
  <script src="{{ '/' | url }}src/components/blv/ordered-list.js"></script>
  <script src="{{ '/' | url }}src/components/blv/radio-selection-list.js"></script>
  <script src="{{ '/' | url }}src/components/blv/agreement.js"></script>
  <script src="{{ '/' | url }}src/components/blv/resources.js"></script>
  <script src="{{ '/' | url }}src/themes/blv/components/scrollto.js"></script>

  <script>
// Initialize BLV components
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initializeBLVComponents);
} else {
  initializeBLVComponents();
}

function initializeBLVComponents() {
  // Initialize carousel
  if (typeof initializeCarousel === 'function') {
    initializeCarousel();
  }

  // Initialize other BLV components as needed
  if (typeof initializeHorizontalStepper === 'function') {
    initializeHorizontalStepper();
  }
  if (typeof initializeCheckmarkButton === 'function') {
    initializeCheckmarkButton();
  }
  if (typeof initializeRatingPicker === 'function') {
    initializeRatingPicker();
  }
  if (typeof initializeCheckmarkLabel === 'function') {
    initializeCheckmarkLabel();
  }
  if (typeof initializeOrderedList === 'function') {
    initializeOrderedList();
  }
  if (typeof initializeRadioSelectionList === 'function') {
    initializeRadioSelectionList();
  }
  if (typeof initializeAgreement === 'function') {
    initializeAgreement();
  }
  if (typeof initializeResources === 'function') {
    initializeResources();
  }
  if (typeof initializeScrollTo === 'function') {
    initializeScrollTo();
  }
}

// Prevent default behavior for links with href="#"
document.addEventListener('DOMContentLoaded', function() {
  document.addEventListener('click', function(event) {
    const link = event.target.closest('a[href="#"]');
    if (link) {
      event.preventDefault();
    }
  });
});

// Global restart/reset function for prototype
function restartPrototype() {
  if (confirm('Are you sure you want to restart the baseline visit? This will clear all your progress and start over.')) {
    // Use DataManager's resetData method which clears all localStorage
    if (window.dataManager) {
      window.dataManager.resetData();
    } else {
      // Fallback if DataManager not loaded
      localStorage.removeItem('baselineVisitData');
      localStorage.removeItem('selectedResources');
    }
    window.location.href = '{{ '/' | url }}prototypes/blv/renewal/';
  }
}

// Also make resetPrototype available globally for scheduling page
function resetPrototype() {
  restartPrototype();
}
    </script>

  {% if page-js %}
  <script src="{{ '/' | url }}prototypes/blv/renewal/src/{{ page-js }}.js?v=2.1"></script>
  {% endif %}

  <!-- Confetti animation system -->
  <script src="{{ '/' | url }}src/themes/blv/components/confetti.js"></script>

  </body>
</html>
